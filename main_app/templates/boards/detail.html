{% extends 'base.html' %}

{% block content %}

<h1>{{board.title }}</h1>
<p> {{board.subject }}</p>
<p> {{board.date}}</p>

<div>
    <div>
        <div>
            <a href="{% url 'board_update' board.id %}">Edit</a>
            <a href="{% url 'board_delete' board.id %}">Delete</a>
        </div>
    

         <div id="boardimages">
            
            <div class='grid-container'>
                {% if board.images.count %}
                {% for image in board.images.all %}
                <div id='grid-section'>

                    <div>
                        
                            {% load static %}
                                <img width="150px" height="150px" src='/media/{{image.img}}' />
                        
                    </div>
                    
                    <div>
                        <form action="{% url 'unassoc_image' board.id image.id %}" method="post">
                            {% csrf_token %}
                            <button id= "association" type="submit" class="btn"> Remove Image </button>
                        </form>
                    </div>
                 </div>
                {% endfor %}
                </div>
                {% else %}
                <h5> Add Image</h5>
                {% endif %}

            </div>


           
         
            
        </div>
    
        <div>
            <button class="open">Available Images</button>
            <div class="popup-overlay">
            <div class="popup-content">
            <div class='grid-container'>
    
            {% if image.count %}
    
            {% for image in image.all %}
                <div id='grid-section'>
               
                    <div >
                       
                            {% load static %}
                            <img width="150px" height="150px" src={% static image.img|cut:'main_app/static/' %} />
                    </div>
    
                    <div>
                        <form action="{% url 'assoc_image' board.id image.id %}" method="post">
                            {% csrf_token %}
                            <button id="association" type="submit" class="btn"> Add Image </button>
                        </form>
                    </div>
    
                </div>
                {% endfor %}
                {% endif %}
                
             </div>
             <button class="close">Close</button> 
             </div>
               
              
            </div>
        </div>
    
    </div>


</div>
<!-- dazzlingly brillant code goes in here -->

<script>
$('.open').on("click", function() {
$(".popup-overlay, .popup-content").addClass('active');
});

//removes the "active" class to .popup and .popup-content when the "Close" button is clicked 
$(".close, .popup-overlay").on("click", function() {
$(".popup-overlay, .popup-content").removeClass('active');
});

$('main').attr('id', 'boarddetail');
</script>

{% endblock %}